# Правила работы над Bychok

Этот документ фиксирует базовые договорённости команды разработки и дизайнеров по проекту Bychok. Он помогает сохранить целостность продукта, уважительно относиться к пользователям и эффективно развивать функциональность.

## 1. Общие принципы

1. **Фокус на микропрогресс.** Все решения должны помогать пользователю делать короткие сфокусированные сессии (3–15 минут) и получать позитивную обратную связь без давления.
2. **Privacy-first.** Не добавляем удалённые телеметрические события без отдельного opt-in. Данные пользователя остаются локальными; экспорт/импорт реализуем прозрачно.
3. **Маскот как проводник.** Визуальные и текстовые элементы строятся вокруг бычёнка — дружелюбного, слегка дерзкого помощника.
4. **Гибкость и уважение.** Пользователь всегда может поставить паузу, скрыть виджет на сайте или настроить частоту пушей.
5. **Геймификация без токсичности.** Стрики, награды и квесты должны вдохновлять, а не заставлять. Никакого шейминга, тревожных уведомлений или потери прогресса без предупреждения.

## 2. Процесс разработки

1. **Итеративные релизы.** Поддерживаем дорожную карту (v0, v0.1, v0.2, v0.3). Каждую фичу оформляем в отдельной ветке с описанием задачи.
2. **Документация.** Для каждой новой возможности обновляем `docs/project_overview.md` и README, если изменяется позиционирование или структура интерфейса.
3. **Code Review.** Любой функциональный код проходит ревью минимум одним участником. Обсуждаем UX/визуал с дизайнерами при изменении поведения маскота или стиля.
4. **Тестирование.** Перед слиянием проверяем основные сценарии: запуск оверлея, корректность таймера, стрики, соблюдение тихих часов. Отдельно тестируем браузеры Chrome/Chromium и, при возможности, Firefox (MV3 совместимый порт).
5. **Доступность.** Соблюдаем контраст WCAG AA, обеспечиваем управление с клавиатуры, добавляем `aria`-атрибуты и логичные анимации без чрезмерного мерцания.
6. **Локализация.** Тексты храним в отдельном словаре; новые строки добавляем с ключами, поддерживая RU/EN минимум.

## 3. Дизайн и контент

1. **Палитра и шрифты.** Используем переменные из `docs/project_overview.md`. Новые цвета согласовываем и фиксируем в токенах.
2. **Маскот.** Анимации поставляются в формате Lottie (до 200 KB). В коде храним ссылки на оптимизированные JSON и SVG fallback.
3. **Тональность.** Сообщения короткие, поддерживающие, с лёгким юмором. Избегаем давления и негативной лексики.
4. **Геймификация.** Стрики считаются по домену; «фриз» доступен раз в неделю бесплатно. Любые изменения механик документируем и синхронизируем с экономикой Horn Coins.

## 4. Безопасность и приватность

1. **Разрешения.** Запрашиваем только необходимые permissions MV3 (`storage`, `scripting`, `tabs`, `alarms`, `notifications`, опционально `sidePanel`). Хосты — только по явному согласию пользователя.
2. **Данные.** Храним в `chrome.storage` с раздельными неймспейсами для настроек и прогресса. Регулярно проверяем экспорт/импорт, очищаем устаревшие записи миграциями.
3. **Cheat-защита.** Таймер учитывает активность вкладки (фокус, видимость, события ввода). Эвристики пересматриваем при выявлении обходов.

## 5. Коммуникация и планирование

1. **Статусы.** Поддерживаем трекинг задач (Notion/Jira) с указанием версии релиза.
2. **Стендапы.** Короткие апдейты (10 минут) в начале дня: что сделано, планы, блокеры.
3. **Ретроспективы.** Раз в релиз анализируем, что улучшить в продукте и процессе.
4. **Фидбек от пользователей.** Собираем добровольные отзывы через форму/бота. Решения по изменению механик принимаем на основе данных и качественных инсайтов.

## 6. Качество и выпуск

1. **QA-чеклист.** Перед релизом проходим список из `docs/project_overview.md` (оверлей, контраст, уведомления, таймзоны, двойной подсчёт).
2. **Сборка.** Используем CI для линтинга, unit/integration тестов и проверки manifest MV3.
3. **Релиз-ноты.** К каждому релизу готовим краткое описание изменений, затрагиваем UX-решения и новые анимации маскота.
4. **Обратная совместимость.** При изменении структуры `chrome.storage` добавляем миграции и тестируем обновление с прошлых версий.

---

Документ пересматриваем раз в квартал или при значительных изменениях стратегии продукта.
